---
title: SQLAlchemy cheat sheet
slug: sqlalchemy-cheat-sheet
date: 2025-01-19
---

[SQLAlchemy](https://www.sqlalchemy.org/) is a powerful SQL toolkit and Object-Relational Mapping (ORM) library for Python. It provides a full suite of well-known enterprise-level persistence patterns, designed for efficient and high-performing database access, adapted into a simple and Pythonic domain language.

This cheat sheet provides a quick reference to the most commonly used SQLAlchemy functions.

<Table className="text-xs">
  <TableHeader>
    <TableRow>
      <TableHead className="w-1/2">Usage</TableHead>
      <TableHead className="w-1/2">Return value</TableHead>
    </TableRow>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableCell className="align-top">
        One or zero rows. Errors on two or more rows.
        <Code language="python">await session.get(Users, 1)</Code>
      </TableCell>
      <TableCell className="align-top">
        <Code language="python">Users(id=1, ...) | None</Code>
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell className="align-top">
        Exactly one row. Errors on none, or two or more rows.
        <Code language="python">await session.get_one(Users, 1)</Code>
      </TableCell>
      <TableCell className="align-top">
        <Code language="python">Users(id=1, ...)</Code>
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell className="align-top">
        <Code language="python">{`result = await session.execute(\n    sa.select(Users)\n)\nresult.all()`}</Code>
        **Note:** You probably want to use `result.scalars().all()` to select the first column only (see below).
      </TableCell>
      <TableCell className="align-top">
        <Code language="python">{`[\n    (Users(id=1, ...), ),\n    (Users(id=2, ...), ),\n    (Users(id=3, ...), ),\n]`}</Code>
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell className="align-top">
        <Code language="python">{`result = await session.execute(\n    sa.select(Users.id)\n)\nresult.all()`}</Code>
        **Note:** You probably want to use `result.scalars().all()` to select the first column only (see below).
      </TableCell>
      <TableCell className="align-top">
        <Code language="python">{`[\n    (1, ),\n    (2, ),\n    (3, ),\n]`}</Code>
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell className="align-top">
        <Code language="python">{`result = await session.execute(\n    sa.select(Users)\n)\nresult.scalars().all()`}</Code>
        Or
        <Code language="python">{`result = await session.scalars(\n    sa.select(Users)\n)\nresult.all()`}</Code>
      </TableCell>
      <TableCell className="align-top">
        <Code language="python">{`[\n    Users(id=1, ...),\n    Users(id=2, ...),\n    Users(id=3, ...),\n]`}</Code>
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell className="align-top">
        <Code language="python">{`result = await session.execute(\n    sa.select(Users.id)\n)\nresult.scalars().all()`}</Code>
        Or
        <Code language="python">{`result = await session.scalars(\n    sa.select(Users.id)\n)\nresult.all()`}</Code>
      </TableCell>
      <TableCell className="align-top">
        <Code language="python">{`[\n    1,\n    2,\n    3,\n]`}</Code>
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell className="align-top">
        <Code language="python">{`result = await session.execute(\n    sa.select(\n        Users.id.label("user_id"),\n        Users.email,\n        Users.name,\n    )\n)\nresult.all()`}</Code>
      </TableCell>
      <TableCell className="align-top">
        <Code language="python">{`[\n    (1, "first@example.com", "Joe Bloggs"),\n    (2, "second@example.com", "John Doe"),\n    (3, "third@example.com", "Jane Doe"),\n]`}</Code>

        **Note:** The result is a list of named tuples.

        <Code language="python">{`result[0][0] == result[0].user_id == 1\nresult[0][1] == result[0].email == "first@example.com"\nresult[0][2] == result[0].name == "Joe Bloggs"`}</Code>
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell className="align-top">
        <Code language="python">{`result = await session.execute(\n    sa.select(\n        Users.id.label("user_id"),\n        Users.email,\n        Users.name,\n    )\n)\nresult.mappings().all()`}</Code>
      </TableCell>
      <TableCell className="align-top">
        <Code language="python">{`[\n    {"user_id": 1, "email": "first@example.com", "name": "Joe Bloggs"},\n    {"user_id": 2, "email": "second@example.com", "name": "John Doe"},\n    {"user_id": 3, "email": "third@example.com", "name": "Jane Doe"},\n]`}</Code>
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell className="align-top">
        Exactly one row. Errors on none, or two or more rows.
        <Code language="python">{`result = await session.execute(\n    sa.select(Users).where(Users.email == "first@example.com")\n)\nresult.scalars().one()`}</Code>
        Or
        <Code language="python">{`result = await session.scalars(\n    sa.select(Users).where(Users.email == "first@example.com")\n)\nresult.one()`}</Code>
        Or
        <Code language="python">{`result = await session.execute(\n    sa.select(Users).where(Users.email == "first@example.com")\n)\result.scalar_one()`}</Code>
      </TableCell>
      <TableCell className="align-top">
        <Code language="python">Users(id=1, ...)</Code>
      </TableCell>
    </TableRow>
    <TableRow>
      <TableCell className="align-top">
        One or zero rows. Errors on two or more rows.
        <Code language="python">{`result = await session.execute(\n    sa.select(Users).where(Users.email == "first@example.com")\n)\nresult.scalars().one_or_none()`}</Code>
        Or
        <Code language="python">{`result = await session.scalars(\n    sa.select(Users).where(Users.email == "first@example.com")\n)\nresult.one_or_none()`}</Code>
        Or
        <Code language="python">{`result = await session.execute(\n    sa.select(Users).where(Users.email == "first@example.com")\n)\nresult.scalar_one_or_none()`}</Code>
      </TableCell>
      <TableCell className="align-top">
        <Code language="python">Users(id=1, ...) | None</Code>
      </TableCell>
    </TableRow>

  </TableBody>
</Table>
